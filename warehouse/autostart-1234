## Openbox autostart.sh
## ====================
## When you login to your CrunchBang Openbox session, this autostart script 
## will be executed to set-up your environment and launch any applications
## you want to run at startup.
##
## More information about this can be found at:
## http://openbox.org/wiki/Help:Autostart
##
## If you do something cool with your autostart script and you think others
## could benefit from your hack, please consider sharing it at:
## http://crunchbanglinux.org/forums/
##
## Have fun! :)

## Start session manager
lxsession &

## Enable power management
xfce4-power-manager &

## Start Thunar Daemon
thunar --daemon &

## Set desktop wallpaper
nitrogen --restore &

## Launch panel
tint2 &

## Turn off loud bell that does not listen to the audio settings
xset b off

## Run background process to fetch the keyboard and fix VMWare stealing 
## issues
keep_my_mouse &

## Enable both external monitors if present
if disper -l | grep "DELL 2709W" ; then
	if disper -l | grep "DELL U3011" ; then
		# acquire this by using nvidia-settings to layout as desired
		# then disper -p to export the current config.
		echo "backend: nvidia
associated displays: DFP-1, DFP-2
metamode: DFP-1: nvidia-auto-select @1920x1200 +2560+0, DFP-2: 2560x1600 @2560x1600 +0+0
scaling: stretched, stretched
xinerama info order: DFP-2, DFP-1" | disper -i ;
	fi
fi

## this works with a base install, not with the 
## nvidia drivers
#if xrandr -q | grep "^DP-1 connected" ; then 
#	if xrandr -q | grep "^DP-2 connected" ; then 
#	    xrandr --output DP-1 --mode 1920x1200 ;
#	    xrandr --output DP-2 --mode 1920x1080 ;
#		xrandr --output DP-1 --primary --left-of DP-2 ;
#	fi
#fi

## Enable Eyecandy - off by default, uncomment one of the commands below.
## Note: cairo-compmgr prefers a sleep delay, else it tends to produce
## odd shadows/quirks around tint2 & Conky.
#(sleep 10s && cb-compmgr --cairo-compmgr) &
cb-compmgr --xcompmgr & 

## Launch network manager applet
(sleep 4s && nm-applet) &

## Detect and configure touchpad. See 'man synclient' for more info.
if egrep -iq 'touchpad' /proc/bus/input/devices; then
    synclient VertEdgeScroll=1 &
    synclient TapButton1=1 &
fi

## Start xscreensaver
xscreensaver -no-splash &

## update the wallpaper from Bing
/usr/local/bin/update-wallpaper

## Start Conky after a slight delay
(sleep 3s && conky -q) &

## Start volumeicon after a slight delay
(sleep 3s && volumeicon) &

## Start Clipboard manager
(sleep 3s && parcellite) &

## Bad Nautilus, minimises the impact of running Nautilus under
## an Openbox session by applying some gconf settings. Safe to delete.
cb-bad-nautilus &

## The following command runs hacks and fixes for #! LiveCD sessions.
## Safe to delete after installation.
cb-cowpowers &

## cb-welcome - post-installation script, will not run in a live session and
## only runs once. Safe to remove.
(sleep 10s && cb-welcome --firstrun) &

## cb-fortune - have Statler say a little adage
#(sleep 120s && cb-fortune) &
